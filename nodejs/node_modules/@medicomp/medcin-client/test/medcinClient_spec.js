/*** Created by pkarcher on 12/19/2014. */
'use strict';

require('should');
var medcin = medcin || require('../index');
var specHelper = require('./SpecHelper');

describe('medcin.Client', function () {

  describe('when instantiated with seed "configuration" object', function () {
    it('uses SpecHelper correctly', function () {
      var testConfig = specHelper.getTestConfiguration();
      var client = new medcin.Client(testConfig);
      client.configuration.host.should.equal(testConfig.host);
      client.configuration.port.should.equal(testConfig.port);
      client.configuration.actuallyConnect.should.equal(true);
//      console.log('versionAsync type: ' + typeof (client.configuration.versionAsync));
//      console.log('versionAsync constructor: ' + client.configuration.versionAsync.constructor.name);
      client.configuration.versionAsync.constructor.name.should.equal('Promise');
    });

    it('uses wierd ad hoc object correctly', function () {
      var testConfig = { host: 'millertime',
                         actuallyConnect: false,
                         versionAsync: 'should be ignored'};
      var client = new medcin.Client(testConfig);
      client.configuration.host.should.equal('millertime');
      client.configuration.actuallyConnect.should.equal(false);
      client.configuration.versionAsync.constructor.name.should.equal('Promise');
      var freshConfig = new medcin.Configuration();
      client.configuration.port.should.equal(freshConfig.port);
      client.configuration.versionAsync.constructor.name.should.equal('Promise');
    });

  });

});
